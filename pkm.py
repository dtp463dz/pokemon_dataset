# -*- coding: utf-8 -*-
"""pkm.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1UacK2H4U1HBFszKDyQvlnzc5Pp4nJB9V
"""

pip install requests beautifulsoup4

import requests
from bs4 import BeautifulSoup
import csv

# Tải trang web
url = 'https://pokemondb.net/pokedex/all'
response = requests.get(url)
html_content = response.content

# Phân tích HTML
soup = BeautifulSoup(html_content, 'html.parser')

# Tìm tất cả các dòng dữ liệu Pokemon
pokemon_rows = soup.select('tr')[1:]  # Bỏ qua dòng đầu tiên (tiêu đề)

# Mở file CSV để ghi dữ liệu
with open('pokemon_data_22.csv', mode='w', newline='', encoding='utf-8') as file:
    writer = csv.writer(file)

    # Viết tiêu đề cho các cột
    writer.writerow(['#', 'Name', 'Type1', 'Type2', 'Total', 'HP', 'Attack', 'Defense', 'Sp.Atk', 'Sp.Def', 'Speed'])

    # Lặp qua từng dòng dữ liệu Pokemon
    for row in pokemon_rows:
        cells = row.select('td')

        # Trích xuất thông tin cần thiết
        pokedex_number = cells[0].select_one('span.infocard-cell-data').text
        name = cells[1].select_one('a.ent-name').text.strip()
        types = [type.text for type in cells[2].select('a.type-icon')]
        stats = [stat.text for stat in cells[3:]]

        # Ghi dữ liệu vào file CSV
        writer.writerow([
            pokedex_number,
            name,
            types[0] if len(types) > 0 else '',
            types[1] if len(types) > 1 else '',
            stats[0],  # Total
            stats[1],  # HP
            stats[2],  # Attack
            stats[3],  # Defense
            stats[4],  # Sp.Atk
            stats[5],  # Sp.Def
            stats[6]   # Speed
        ])